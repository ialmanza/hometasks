<div class="login-container">
  <div class="login-background"></div>
  <div class="login-content">
    <div class="login-form">
      <div class="login-header">
        <h2 class="login-title">Iniciar sesión</h2>
      </div>

      <!-- Indicador de verificación inicial -->
      <div *ngIf="isCheckingInitialSession" class="message-container">
        <div class="info-message backdrop-blur-sm">
          Verificando sesión...
        </div>
      </div>

      <!-- Mensaje de error -->
      <div *ngIf="errorMessage && !isCheckingInitialSession" class="message-container">
        <div class="error-message backdrop-blur-sm">
          {{ errorMessage }}
        </div>
      </div>

      <!-- Mensaje de éxito -->
      <div *ngIf="successMessage && !isCheckingInitialSession" class="message-container">
        <div class="success-message backdrop-blur-sm">
          {{ successMessage }}
        </div>
      </div>

      <form *ngIf="!isCheckingInitialSession" (ngSubmit)="onLogin()" #loginForm="ngForm" class="login-form-content">
        <div class="input-group">
          <input type="email"
                 placeholder="Correo electrónico"
                 class="form-input"
                 [(ngModel)]="email"
                 name="email"
                 required
                 email
                 (input)="onInputChange()"
                 [class.error]="loginForm.submitted && loginForm.controls['email'].invalid" />
        </div>

        <div class="input-group">
          <input type="password"
                 placeholder="Contraseña"
                 class="form-input"
                 [(ngModel)]="password"
                 name="password"
                 required
                 (input)="onInputChange()"
                 [class.error]="loginForm.submitted && loginForm.controls['password'].invalid" />
        </div>

        <div class="button-group">
          <button type="submit"
                  [disabled]="!loginForm.valid || isLoading"
                  class="btn-primary"
                  [class.isLoading]="isLoading">
            <span class="truncate">{{ isLoading ? 'Iniciando sesión...' : 'Iniciar sesión' }}</span>
          </button>
        </div>
      </form>

    </div>
  </div>
</div>
